---
title: 用hexo写博客
date: 2015-12-02
tags: hexo
---

### 0. 整体思路
* github 新建blog项目，用来保存具体的hexo项目代码与post文章原文
* mac 本机拉取blog项目，开始写blog
* 本机 hexo s 查看没问题后，push 到github的blog仓库
* 本机 hexo d 发布到github的 username.github.io 仓库
* 本机 rsync 方式同步到个人的VPS服务器

### 1. hexo 简介
hexo 是一套nodejs开发的开源博客程序，这个博客程序与wordpress最大的不同是可以本地运行然后将生成的静态文件上传到服务器，即本地写博客然后把生成的博客文章同步上传到服务器，服务器上就是一个纯静态的博客了。具体参考[hexo](https://hexo.io/zh-cn/)。

### 2. hexo 安装步骤
* 具体安装nodejs，这个自行解决吧。:-)
``` bash
npm install hexo-cli -g
hexo init blog
cd blog
npm install 
hexo server
```
* 访问 http://localhost:4000， 就可以看到博客了。

### 3. hexo 使用
* 进入blog 目录，使用 hexo 对应命令即可
``` bash
cd ~/blog
hexo new "新博客"  #新建博客后，打开markdown编辑器写博客，推荐vscode
hexo g            #hexo 产生静态文件
hexo s            #hexo 启动服务器
```

### 4. ubuntu 安装 rsync
* 4.1 先安装rsync，在修改如下设置
	``` bash
	apt-get -y install rsync
	vi /etc/default/rsync
	# line 8: change
	RSYNC_ENABLE=true
	```

* 4.2 创建配置文件  `vim /etc/rsyncd.conf` 此文件默认不存在
	``` bash
	[blog]
	# destination directory
	path = /var/www/www.yoursite.com/
	# Hosts you allow to copy (specify source Host)

	hosts allow = *
	hosts deny = *
	list = true
	uid = root
	gid = root
	read only = false
	```
	
### 5. 博客写完后需要提交到github的个人blog项目中
``` bash
git add .
git commit -m '新博客注释'
git push origin master
```
	
### 6. hexo 生成静态文件后上传到nginx服务器
``` bash
hexo g
hexo d
rsync -az ~/blog/public/ root@ipaddress:/var/www/www.yoursite.com
```

### 7. hexo 配置
hexo 配置文件在 blog 目录下的 _config.yml 文件，一般需要修改 Site 配置节以及最后面的 theme 。
	
